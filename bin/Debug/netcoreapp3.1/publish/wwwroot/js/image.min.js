function crop(a,b,c,d="blob",e="image/jpeg"){return new Promise((f,g)=>{const h=document.createElement("img");let i=0,j=0;h.onload=()=>{URL.revokeObjectURL(h.src);let a=b/c;i=h.naturalWidth,j=h.naturalHeight;let k,l,m,n,o=i/j;a>=o?(m=i,n=i/a,k=0,l=(j-n)/2):(m=j*a,n=j,k=(i-m)/2,l=0);const p=document.createElement("canvas");if(p.width=b,p.height=c,p.getContext("2d").drawImage(h,k,l,m,n,0,0,b,c),"blob"==d)p.toBlob(a=>f(a),e);else if("dataURL"==d){let a=p.toDataURL(e);f({dataURL:a,nh:j,nw:i})}else g("ERROR: Specify blob or dataURL")},h.onerror=()=>{URL.revokeObjectURL(h.src),g("ERROR: File is not an image")},h.src=URL.createObjectURL(a)})}function fit(a,b,c,d="blob",e="image/jpeg"){return new Promise((f,g)=>{const h=document.createElement("img");h.onload=()=>{URL.revokeObjectURL(h.src);let a=b/c,i=h.naturalWidth,j=h.naturalHeight,k=i/j;i<=b&&j<=c?(b=i,c=j):k>=a?c=b/k:b=c*k;const l=document.createElement("canvas");if(l.width=b,l.height=c,l.getContext("2d").drawImage(h,0,0,b,c),"blob"==d)l.toBlob(a=>f(a),e);else if("dataURL"==d){let a=l.toDataURL(e);f({dataURL:a,nh:j,nw:i})}else g("ERROR: Specify blob or dataURL")},h.onerror=()=>{URL.revokeObjectURL(h.src),g("ERROR: File is not an image")},h.src=URL.createObjectURL(a)})}